/*!
 * TextPlugin 3.5.1
 * https://greensock.com
 *
 * @license Copyright 2008-2020, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
import{emojiSafeSplit as n,getText as i,splitInnerHTML as t}from"./utils/strings.js";var e,s;export var TextPlugin={version:"3.5.1",name:"text",init:function(n,i,e){var r,a,o,u,f,l,p,x,T=n.nodeName.toUpperCase(),d=this;if(d.i=n.getBBox&&("TEXT"===T||"TSPAN"===T),!("innerHTML"in n)&&!d.i)return!1;if(d.target=n,"object"!=typeof i&&(i={value:i}),"value"in i){for(d.t=i.t||"",o=t(n,d.t),s||(s=document.createElement("div")),s.innerHTML=i.value,a=t(s,d.t),d.from=e.o,d.from&&(T=o,o=a,a=T),d.u=!(!i.l&&!i.p),d.l=i.l,d.p=i.p,r=(T=o.length-a.length)<0?o:a,d.T=i.T||(i.v?"&nbsp;":""),T<0&&(T=-T);--T>-1;)r.push(d.T);if("diff"===i.type){for(u=0,f=[],l=[],p="",T=0;T<a.length;T++)(x=a[T])===o[T]?p+=x:(f[u]=p+x,l[u++]=p+o[T],p="");a=f,o=l,p&&(a.push(p),o.push(p))}i.speed&&e.duration(Math.min(.05/i.speed*r.length,i.g||9999)),this.P=o,this.text=a,this.h.push("text")}else d.text=d.P=[""]},m:function(n,i){n>1?n=1:n<0&&(n=0),i.from&&(n=1-n);var t,e,s,r=i.text,a=i.u,o=i.l,u=i.p,f=i.t,l=i.target,p=i.T,x=i.P,T=r.length,d=n*T+.5|0;a?(e=u&&d!==T,s=((t=o&&d)?"<span class='"+o+"'>":"")+r.slice(0,d).join(f)+(t?"</span>":"")+(e?"<span class='"+u+"'>":"")+f+x.slice(d).join(f)+(e?"</span>":"")):s=r.slice(0,d).join(f)+f+x.slice(d).join(f),i.i?l.textContent=s:l.innerHTML="&nbsp;"===p&&~s.indexOf("  ")?s.split("  ").join("&nbsp;&nbsp;"):s}};TextPlugin.j=t,TextPlugin.M=n,TextPlugin.A=i,(e||"undefined"!=typeof window&&(e=window.gsap)&&e.H&&e)&&e.H(TextPlugin);export{TextPlugin as default};