/*!
 * CustomEase 3.5.1
 * https://greensock.com
 *
 * @license Copyright 2008-2020, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
import{stringToRawPath as t,rawPathToString as n,transformRawPath as r}from"./utils/paths.js";var e,i,o=function(){return e||"undefined"!=typeof window&&(e=window.gsap)&&e.t&&e},s=function(){(e=o())?(e.i("_CE",CustomEase.create),i=1):console.warn("Please gsap.registerPlugin(CustomEase)")},u=function(t){return~~(1e3*t+(t<0?-.5:.5))/1e3},a=/[-+=\.]*\d+[\.e\-\+]*\d*[e\-\+]*\d*/gi,f=/[cLlsSaAhHvVtTqQ]/g,h=function t(n,r,e,i,o,s,u,a,f,h,c){var v,d=(n+e)/2,l=(r+i)/2,x=(e+o)/2,M=(i+s)/2,m=(o+u)/2,y=(s+a)/2,C=(d+x)/2,E=(l+M)/2,p=(x+m)/2,g=(M+y)/2,w=(C+p)/2,P=(E+g)/2,j=u-n,q=a-r,A=Math.abs((e-u)*q-(i-a)*j),H=Math.abs((o-u)*q-(s-a)*j);return h||(h=[{x:n,y:r},{x:u,y:a}],c=1),h.splice(c||h.length-1,0,{x:w,y:P}),(A+H)*(A+H)>f*(j*j+q*q)&&(v=h.length,t(n,r,d,l,C,E,w,P,f,h,c),t(w,P,p,g,m,y,u,a,f,h,c+1+(h.length-v))),h};export var CustomEase=function(){function o(t,n,r){i||s(),this.id=t,this.setData(n,r)}var c=o.prototype;return c.setData=function(n,r){r=r||{};var i,o,s,u,c,v,d,l,x,M=(n=n||"0,0,1,1").match(a),m=1,y=[],C=[],E=r.precision||1,p=E<=1;if(this.data=n,(f.test(n)||~n.indexOf("M")&&n.indexOf("C")<0)&&(M=t(n)[0]),4===(i=M.length))M.unshift(0,0),M.push(1,1),i=8;else if((i-2)%6)throw"Invalid CustomEase";for(0==+M[0]&&1==+M[i-2]||function(t,n,r){r||0===r||(r=Math.max(+t[t.length-1],+t[1]));var e,i=-1*+t[0],o=-r,s=t.length,u=1/(+t[s-2]+i),a=-n||(Math.abs(+t[s-1]-+t[1])<.01*(+t[s-2]-+t[0])?function(t){var n,r=t.length,e=1e20;for(n=1;n<r;n+=6)+t[n]<e&&(e=+t[n]);return e}(t)+o:+t[s-1]+o);for(a=a?1/a:-u,e=0;e<s;e+=2)t[e]=(+t[e]+i)*u,t[e+1]=(+t[e+1]+o)*a}(M,r.height,r.o),this.u=M,u=2;u<i;u+=6)o={x:+M[u-2],y:+M[u-1]},s={x:+M[u+4],y:+M[u+5]},y.push(o,s),h(o.x,o.y,+M[u],+M[u+1],+M[u+2],+M[u+3],s.x,s.y,1/(2e5*E),y,y.length-1);for(i=y.length,u=0;u<i;u++)d=y[u],l=y[u-1]||d,(d.x>l.x||l.y!==d.y&&l.x===d.x||d===l)&&d.x<=1?(l.cx=d.x-l.x,l.cy=d.y-l.y,l.n=d,l.h=d.x,p&&u>1&&Math.abs(l.cy/l.cx-y[u-2].cy/y[u-2].cx)>2&&(p=0),l.cx<m&&(l.cx?m=l.cx:(l.cx=.001,u===i-1&&(l.x-=.001,m=Math.min(m,.001),p=0)))):(y.splice(u--,1),i--);if(c=1/(i=1/m+1|0),v=0,d=y[0],p){for(u=0;u<i;u++)x=u*c,d.h<x&&(d=y[++v]),o=d.y+(x-d.x)/d.cx*d.cy,C[u]={x,cx:c,y:o,cy:0,h:9},u&&(C[u-1].cy=o-C[u-1].y);C[i-1].cy=y[y.length-1].y-o}else{for(u=0;u<i;u++)d.h<u*c&&(d=y[++v]),C[u]=d;v<y.length-1&&(C[u-1]=y[y.length-2])}return this.v=function(t){var n=C[t*i|0]||C[i-1];return n.h<t&&(n=n.n),n.y+(t-n.x)/n.cx*n.cy},this.v.l=this,this.id&&e.i(this.id,this.v),this},c.M=function(t){return o.M(this,t)},o.create=function(t,n,r){return new o(t,n,r).v},o.register=function(t){e=t,s()},o.get=function(t){return e.m(t)},o.M=function(t,i){var s,a,f,h,c,v,d,l,x,M,m=(i=i||{}).width||100,y=i.height||100,C=i.x||0,E=(i.y||0)+y,p=e.C.toArray(i.path)[0];if(i.p&&(y=-y,E=0),"string"==typeof t&&(t=e.m(t)),t.l&&(t=t.l),t instanceof o)s=n(r([t.u],m,0,0,-y,C,E));else{for(s=[C,E],h=1/(d=Math.max(5,200*(i.precision||1))),l=5/(d+=2),x=u(C+h*m),a=((M=u(E+t(h)*-y))-E)/(x-C),f=2;f<d;f++)c=u(C+f*h*m),v=u(E+t(f*h)*-y),(Math.abs((v-M)/(c-x)-a)>l||f===d-1)&&(s.push(x,M),a=(v-M)/(c-x)),x=c,M=v;s="M"+s.join(",")}return p&&p.setAttribute("d",s),s},o}();o()&&e.t(CustomEase),CustomEase.version="3.5.1";export{CustomEase as default};