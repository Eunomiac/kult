/*!
 * MorphSVGPlugin 3.5.1
 * https://greensock.com
 *
 * @license Copyright 2008-2020, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
import{getRawPath as t,reverseSegment as r,stringToRawPath as n,rawPathToString as i,convertToPath as o}from"./utils/paths.js";var e,a,f,u,h,s=function(){return e||"undefined"!=typeof window&&(e=window.gsap)&&e.t&&e},l=function(t){return"function"==typeof t},p=Math.atan2,c=Math.cos,v=Math.sin,M=Math.sqrt,g=Math.PI,d=2*g,P=.3*g,m=.7*g,y=/[-+=\.]*\d+[\.e\-\+]*\d*[e\-\+]*\d*/gi,S=/(^[#\.][a-z]|[a-y][a-z])/gi,T=/[achlmqstvz]/gi,G=function(t){return console&&console.warn(t)},N=function(t){var r,n=t.length,i=0,o=0;for(r=0;r<n;r++)i+=t[r++],o+=t[r];return[i/(n/2),o/(n/2)]},V=function(t){var r,n,i,o=t.length,e=t[0],a=e,f=t[1],u=f;for(i=6;i<o;i+=6)(r=t[i])>e?e=r:r<a&&(a=r),(n=t[i+1])>f?f=n:n<u&&(u=n);return t.i=(e+a)/2,t.o=(f+u)/2,t.size=(e-a)*(f-u)},w=function(t,r){void 0===r&&(r=3);for(var n,i,o,e,a,f,u,h,s,l,p,c,v,M,g,d,P=t.length,m=t[0][0],y=m,S=t[0][1],T=S,G=1/r;--P>-1;)for(n=(a=t[P]).length,e=6;e<n;e+=6)for(s=a[e],l=a[e+1],p=a[e+2]-s,M=a[e+3]-l,c=a[e+4]-s,g=a[e+5]-l,v=a[e+6]-s,d=a[e+7]-l,f=r;--f>-1;)(i=((u=G*f)*u*v+3*(h=1-u)*(u*c+h*p))*u+s)>m?m=i:i<y&&(y=i),(o=(u*u*d+3*h*(u*g+h*M))*u+l)>S?S=o:o<T&&(T=o);return t.i=(m+y)/2,t.o=(S+T)/2,t.left=y,t.width=m-y,t.top=T,t.height=S-T,t.size=(m-y)*(S-T)},x=function(t,r){return r.length-t.length},F=function(t,r){var n=t.size||V(t),i=r.size||V(r);return Math.abs(i-n)<(n+i)/20?r.i-t.i||r.o-t.o:i-n},A=function(t,r){var n,i,o=t.slice(0),e=t.length,a=e-2;for(r|=0,n=0;n<e;n++)i=(n+r)%a,t[n++]=o[i],t[n]=o[i+1]},b=function(t,r,n,i,o){var e,a,f,u,h=t.length,s=0,l=h-2;for(n*=6,a=0;a<h;a+=6)u=t[e=(a+n)%l]-(r[a]-i),f=t[e+1]-(r[a+1]-o),s+=M(f*f+u*u);return s},z=function(t,n,i){var o,e,a,f=t.length,u=N(t),h=N(n),s=h[0]-u[0],l=h[1]-u[1],p=b(t,n,0,s,l),c=0;for(a=6;a<f;a+=6)(e=b(t,n,a/6,s,l))<p&&(p=e,c=a);if(i)for(o=t.slice(0),r(o),a=6;a<f;a+=6)(e=b(o,n,a/6,s,l))<p&&(p=e,c=-a);return c/6},j=function(t,r,n){for(var i,o,e,a,f,u,h=t.length,s=1e20,l=0,p=0;--h>-1;)for(u=(i=t[h]).length,f=0;f<u;f+=6)o=i[f]-r,e=i[f+1]-n,(a=M(o*o+e*e))<s&&(s=a,l=i[f],p=i[f+1]);return[l,p]},H=function(t,r,n,i,o,e){var a,f,u,h,s=r.length,l=0,p=Math.min(t.size||V(t),r[n].size||V(r[n]))*i,c=1e20,v=t.i+o,g=t.o+e;for(a=n;a<s&&!((r[a].size||V(r[a]))<p);a++)f=r[a].i-v,u=r[a].o-g,(h=M(f*f+u*u))<c&&(l=a,c=h);return h=r[l],r.splice(l,1),h},I=function(t,r){var n,i,o,e,a,f,u,h,s,l,p,c,v,M,g=0,d=t.length,P=r/((d-2)/6);for(v=2;v<d;v+=6)for(g+=P;g>.999999;)n=t[v-2],i=t[v-1],o=t[v],e=t[v+1],a=t[v+2],f=t[v+3],u=t[v+4],h=t[v+5],s=n+(o-n)*(M=1/((Math.floor(g)||1)+1)),s+=((p=o+(a-o)*M)-s)*M,p+=(a+(u-a)*M-p)*M,l=i+(e-i)*M,l+=((c=e+(f-e)*M)-l)*M,c+=(f+(h-f)*M-c)*M,t.splice(v,4,n+(o-n)*M,i+(e-i)*M,s,l,s+(p-s)*M,l+(c-l)*M,p,c,a+(u-a)*M,f+(h-f)*M),v+=6,d+=6,g--;return t},L=function(t,n,i,o,e){var a,f,u,h,s,l,p,c=n.length-t.length,v=c>0?n:t,M=c>0?t:n,g=0,d="complexity"===o?x:F,P="position"===o?0:"number"==typeof o?o:.8,m=M.length,y="object"==typeof i&&i.push?i.slice(0):[i],S="reverse"===y[0]||y[0]<0,T="log"===i;if(M[0]){if(v.length>1&&(t.sort(d),n.sort(d),v.size||w(v),M.size||w(M),l=v.i-M.i,p=v.o-M.o,d===F))for(m=0;m<M.length;m++)v.splice(m,0,H(M[m],v,m,P,l,p));if(c)for(c<0&&(c=-c),v[0].length>M[0].length&&I(M[0],(v[0].length-M[0].length)/6|0),m=M.length;g<c;)v[m].size||V(v[m]),h=(u=j(M,v[m].i,v[m].o))[0],s=u[1],M[m++]=[h,s,h,s,h,s,h,s],M.u+=8,g++;for(m=0;m<t.length;m++)a=n[m],f=t[m],(c=a.length-f.length)<0?I(a,-c/6|0):c>0&&I(f,c/6|0),S&&!1!==e&&!f.reversed&&r(f),(i=y[m]||0===y[m]?y[m]:"auto")&&(f.closed||Math.abs(f[0]-f[f.length-2])<.5&&Math.abs(f[1]-f[f.length-1])<.5?"auto"===i||"log"===i?(y[m]=i=z(f,a,!m||!1===e),i<0&&(S=!0,r(f),i=-i),A(f,6*i)):"reverse"!==i&&(m&&i<0&&r(f),A(f,6*(i<0?-i:i))):!S&&("auto"===i&&Math.abs(a[0]-f[0])+Math.abs(a[1]-f[1])+Math.abs(a[a.length-2]-f[f.length-2])+Math.abs(a[a.length-1]-f[f.length-1])>Math.abs(a[0]-f[f.length-2])+Math.abs(a[1]-f[f.length-1])+Math.abs(a[a.length-2]-f[0])+Math.abs(a[a.length-1]-f[1])||i%2)?(r(f),y[m]=-1,S=!0):"auto"===i?y[m]=0:"reverse"===i&&(y[m]=-1),f.closed!==a.closed&&(f.closed=a.closed=!1));return T&&G("shapeIndex:["+y.join(",")+"]"),t.h=y,y}},O=function(t,r){var n,i,o,e,a,f,u,h=0,s=parseFloat(t[0]),l=parseFloat(t[1]),p=s+","+l+" ",c=.999999;for(n=.5*r/(.5*(o=t.length)-1),i=0;i<o-2;i+=2){if(h+=n,f=parseFloat(t[i+2]),u=parseFloat(t[i+3]),h>c)for(a=1/(Math.floor(h)+1),e=1;h>c;)p+=(s+(f-s)*a*e).toFixed(2)+","+(l+(u-l)*a*e).toFixed(2)+" ",h--,e++;p+=f+","+u+" ",s=f,l=u}return p},R=function(t){var r=t[0].match(y)||[],n=t[1].match(y)||[],i=n.length-r.length;i>0?t[0]=O(r,i):t[1]=O(n,-i)},q=function(t){return isNaN(t)?R:function(r){R(r),r[1]=function(t,r){if(!r)return t;var n,i,o,e=t.match(y)||[],a=e.length,f="";for("reverse"===r?(i=a-1,n=-2):(i=(2*(parseInt(r,10)||0)+1+100*a)%a,n=2),o=0;o<a;o+=2)f+=e[i-1]+","+e[i]+" ",i=(i+n)%a;return f}(r[1],parseInt(t,10))}},C=function(t,r){for(var n,i,o,e,a,f,u,h,s,l,c,v,g=t.length,d=.2*(r||1);--g>-1;){for(c=(i=t[g]).l=i.l||[0,0,0,0],v=i.p=i.p||[0,0,0,0],c.length=4,h=i.length-2,u=6;u<h;u+=6)o=i[u]-i[u-2],e=i[u+1]-i[u-1],a=i[u+2]-i[u],f=i[u+3]-i[u+1],s=p(e,o),l=p(f,a),(n=Math.abs(s-l)<d)&&(v[u-2]=s,v[u+2]=l,v[u-1]=M(o*o+e*e),v[u+3]=M(a*a+f*f)),c.push(n,n,0,0,n,n);i[h]===i[0]&&i[h+1]===i[1]&&(o=i[0]-i[h-2],e=i[1]-i[h-1],a=i[2]-i[0],f=i[3]-i[1],s=p(e,o),l=p(f,a),Math.abs(s-l)<d&&(v[h-2]=s,v[2]=l,v[h-1]=M(o*o+e*e),v[3]=M(a*a+f*f),c[h-2]=c[h-1]=!0))}return t},U=function(t){var r=t.trim().split(" ");return{x:(~t.indexOf("left")?0:~t.indexOf("right")?100:isNaN(parseFloat(r[0]))?50:parseFloat(r[0]))/100,y:(~t.indexOf("top")?0:~t.indexOf("bottom")?100:isNaN(parseFloat(r[1]))?50:parseFloat(r[1]))/100}},Y="Use MorphSVGPlugin.convertToPath() to convert to a path before morphing.",_=function(t,r,n,i){var o,e,a,u=this.v,h=this.M,s=t[n]-u.x,l=t[n+1]-u.y,c=M(s*s+l*l),v=p(l,s);return s=r[n]-h.x,l=r[n+1]-h.y,o=p(l,s)-v,e=(a=o)!==a%g?a+(a<0?d:-d):a,!i&&f&&Math.abs(e+f.g)<P&&(i=f),this.P=f={m:this.P,S:t,T:v,g:i&&e*i.g<0&&Math.abs(e)>m?o:e,G:c,N:M(s*s+l*l)-c,V:n}},k=function(t){e=s(),h=h||e&&e.plugins.F,e&&h?(a=e.A.toArray,document,h.prototype.j=_,u=1):t&&G("Please gsap.registerPlugin(MorphSVGPlugin)")};export var MorphSVGPlugin={version:"3.5.1",name:"morphSVG",H:1,register:function(t,r){e=t,h=r,k()},init:function(t,r,e,h,s){if(u||k(1),!r)return G("invalid shape"),!1;var p,c,v,M,g,d,P,m,N,V,x,F,A,b,z,j,H,I,O,R,_,E;if(l(r)&&(r=r.call(e,h,t,s)),"string"==typeof r||r.getBBox||r[0])r={shape:r};else if("object"==typeof r){for(c in p={},r)p[c]=l(r[c])&&"render"!==c?r[c].call(e,h,t,s):r[c];r=p}var Q=t.nodeType?window.getComputedStyle(t):{},W=Q.fill+"",B=!("none"===W||"0"===(W.match(y)||[])[3]||"evenodd"===Q.fillRule),D=(r.origin||"50 50").split(",");if(g="POLYLINE"===(p=(t.nodeName+"").toUpperCase())||"POLYGON"===p,"PATH"!==p&&!g&&!r.I)return G("Cannot morph a <"+p+"> element. "+Y),!1;if(c="PATH"===p?"d":"points",!r.I&&!l(t.setAttribute))return!1;if(M=function(t,r,n){var i,e;return(!("string"==typeof t)||S.test(t)||(t.match(y)||[]).length<3)&&((i=a(t)[0])?(e=(i.nodeName+"").toUpperCase(),r&&"PATH"!==e&&(i=o(i,!1),e="PATH"),t=i.getAttribute("PATH"===e?"d":"points")||"",i===n&&(t=i.getAttributeNS(null,"data-original")||t)):(G("WARNING: invalid morph to: "+t),t=!1)),t}(r.shape||r.d||r.points||"","d"===c,t),g&&T.test(M))return G("A <"+p+"> cannot accept path data. "+Y),!1;if(d=r.h||0===r.h?r.h:"auto",P=r.map||MorphSVGPlugin.L,this.O=r.I,this.R=r.q||MorphSVGPlugin.C,this.U="Y"in r?r.Y:MorphSVGPlugin._,this.k=Math.pow(10,isNaN(r.precision)?2:+r.precision),this.W=e,M){if(this.B=t,H="object"==typeof r.D,V=this.O?t[this.O]:t.getAttribute(c),this.O||t.getAttributeNS(null,"data-original")||t.setAttributeNS(null,"data-original",V),"d"===c||this.O){if(V=n(H?r.D[0]:V),x=n(H?r.D[1]:M),!H&&!L(V,x,d,P,B))return!1;for("log"!==r.D&&!0!==r.D||G('precompile:["'+i(V)+'","'+i(x)+'"]'),(_="linear"!==(r.type||MorphSVGPlugin.J))&&(V=C(V,r.K),x=C(x,r.K),V.size||w(V),x.size||w(x),R=U(D[0]),this.v=V.origin={x:V.left+R.x*V.width,y:V.top+R.y*V.height},D[1]&&(R=U(D[1])),this.M={x:x.left+R.x*x.width,y:x.top+R.y*x.height}),this.X=t.Z=V,A=V.length;--A>-1;)for(z=V[A],j=x[A],m=z.l||[],N=j.l||[],b=z.length,f=0,F=0;F<b;F+=2)j[F]===z[F]&&j[F+1]===z[F+1]||(_?m[F]&&N[F]?(I=z.p,O=j.p,E=F+(F===b-4?7-b:5),this.$={m:this.$,V:F,tt:A,rt:I[F+1],nt:O[F+1]-I[F+1],it:I[E],ot:O[E]-I[E]},v=this.j(z,j,F+2),this.j(z,j,F,v),this.j(z,j,E-1,v),F+=4):this.j(z,j,F):(v=this.add(z,F,z[F],j[F]),v=this.add(z,F+1,z[F+1],j[F+1])||v))}else v=this.add(t,"setAttribute",t.getAttribute(c)+"",M+"",h,s,0,q(d),c);_&&(this.add(this.v,"x",this.v.x,this.M.x),v=this.add(this.v,"y",this.v.y,this.M.y)),v&&(this.et.push("morphSVG"),v.end=M,v.ft=c)}return 1},q:function(t,r){for(var n,i,o,e,a,f,u,h,s,l,M,g,d=r.X,P=r.$,m=r.P,y=r.k,S=r.B,T=r.ut;T;)T.r(t,T.d),T=T.m;if(1===t&&r.U)for(T=r.ut;T;)T.end&&(r.O?S[r.O]=T.end:S.setAttribute(T.ft,T.end)),T=T.m;else if(d){for(;m;)a=m.T+t*m.g,e=m.G+t*m.N,m.S[m.V]=r.v.x+c(a)*e,m.S[m.V+1]=r.v.y+v(a)*e,m=m.m;for(i=t<.5?2*t*t:(4-2*t)*t-1;P;)g=(f=P.V)+(f===(o=d[P.tt]).length-4?7-o.length:5),a=p(o[g]-o[f+1],o[g-1]-o[f]),l=v(a),M=c(a),h=o[f+2],s=o[f+3],e=P.rt+i*P.nt,o[f]=h-M*e,o[f+1]=s-l*e,e=P.it+i*P.ot,o[g-1]=h+M*e,o[g]=s+l*e,P=P.m;if(S.Z=d,r.U){for(n=""," ",u=0;u<d.length;u++)for(e=(o=d[u]).length,n+="M"+(o[0]*y|0)/y+" "+(o[1]*y|0)/y+" C",f=2;f<e;f++)n+=(o[f]*y|0)/y+" ";r.O?S[r.O]=n:S.setAttribute("d",n)}}r.R&&d&&r.R.call(r.W,d,S)},ht:function(t){this.ut=this.X=0},st:t,lt:n,ct:i,vt:function(t,r,o,e,a){var f=n(t[0]),u=n(t[1]);L(f,u,r||0===r?r:"auto",o,a)&&(t[0]=i(f),t[1]=i(u),"log"!==e&&!0!==e||G('precompile:["'+t[0]+'","'+t[1]+'"]'))},Mt:R,gt:w,dt:L,Pt:function(t,r){return a(t).map((function(t){return o(t,!1!==r)}))},J:"linear",_:!0,L:"size"};s()&&e.t(MorphSVGPlugin);export{MorphSVGPlugin as default};