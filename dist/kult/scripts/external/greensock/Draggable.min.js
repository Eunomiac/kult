/*!
 * Draggable 3.5.1
 * https://greensock.com
 *
 * @license Copyright 2008-2020, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
 */
import{getGlobalMatrix as t,Matrix2D as n}from"./utils/matrix.js";var r,o,e,i,u,a,c,f,l,s,h,p,v,d,x,g,m,M,w,y,b,F=function(){return"undefined"!=typeof window},D=function(){return r||F()&&(r=window.gsap)&&r.t&&r},k=function(t){return"function"==typeof t},P=function(t){return"object"==typeof t},C=function(t){return void 0===t},N=function(){return!1},S="transform",I="transformOrigin",E=function(t){return Math.round(1e4*t)/1e4},A=Array.isArray,R=function(t,n){var r=e.createElementNS?e.createElementNS((n||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):e.createElement(t);return r.style?r:e.createElement(t)},T=180/Math.PI,U=1e20,j=new n,O=Date.now||function(){return(new Date).getTime()},X=[],Y={},z=0,$=/^(?:a|input|textarea|button|select)$/i,_=0,H={},K={},L=function(t,n){var r,o={};for(r in t)o[r]=n?t[r]*n:t[r];return o},W=function(){return X.forEach((function(t){return t()}))},Z=function(){return!X.length&&r.o.remove(W)},q=function(t){for(var n=X.length;n--;)X[n]===t&&X.splice(n,1);r.to(Z,{i:!0,delay:15,duration:0,u:Z,data:"_draggable"})},B=function(t,n,r,o){if(t.addEventListener){var e=v[n];o=o||(h?{passive:!1}:null),t.addEventListener(e||n,r,o),e&&n!==e&&t.addEventListener(n,r,o)}},G=function(t,n,r){if(t.removeEventListener){var o=v[n];t.removeEventListener(o||n,r),o&&n!==o&&t.removeEventListener(n,r)}},J=function(t){t.preventDefault&&t.preventDefault(),t.l&&t.l()},Q=function t(n){x=n.touches&&d<n.touches.length,G(n.target,"touchend",t)},V=function(t){x=t.touches&&d<t.touches.length,B(t.target,"touchend",Q)},tt=function(t){return o.pageYOffset||t.scrollTop||t.documentElement.scrollTop||t.body.scrollTop||0},nt=function(t){return o.pageXOffset||t.scrollLeft||t.documentElement.scrollLeft||t.body.scrollLeft||0},rt=function t(n,r){B(n,"scroll",r),et(n.parentNode)||t(n.parentNode,r)},ot=function t(n,r){G(n,"scroll",r),et(n.parentNode)||t(n.parentNode,r)},et=function(t){return!(t&&t!==i&&9!==t.nodeType&&t!==e.body&&t!==o&&t.nodeType&&t.parentNode)},it=function(t,n){var r="x"===n?"Width":"Height",e="scroll"+r,a="client"+r;return Math.max(0,et(t)?Math.max(i[e],u[e])-(o["inner"+r]||i[a]||u[a]):t[e]-t[a])},ut=function t(n,r){var o=it(n,"x"),e=it(n,"y");et(n)?n=K:t(n.parentNode,r),n.h=o,n.p=e,r||(n.v=n.scrollLeft||0,n.g=n.scrollTop||0)},at=function(t,n,r){var o=t.style;o&&(C(o[n])&&(n=l(n,t)||n),null==r?o.removeProperty&&o.removeProperty(n.replace(/([A-Z])/g,"-$1").toLowerCase()):o[n]=r)},ct=function(t){return o.getComputedStyle(t instanceof Element?t:t.host||(t.parentNode||{}).host||t)},ft={},lt=function(t){if(t===o)return ft.left=ft.top=0,ft.width=ft.right=i.clientWidth||t.innerWidth||u.clientWidth||0,ft.height=ft.bottom=(t.innerHeight||0)-20<i.clientHeight?i.clientHeight:t.innerHeight||u.clientHeight||0,ft;var n=t.ownerDocument||e,r=C(t.pageX)?t.nodeType||C(t.left)||C(t.top)?s(t)[0].getBoundingClientRect():t:{left:t.pageX-nt(n),top:t.pageY-tt(n),right:t.pageX-nt(n)+1,bottom:t.pageY-tt(n)+1};return C(r.right)&&!C(r.width)?(r.right=r.left+r.width,r.bottom=r.top+r.height):C(r.width)&&(r={width:r.right-r.left,height:r.bottom-r.top,right:r.right,left:r.left,bottom:r.bottom,top:r.top}),r},st=function(t,n,r){var o,e=t.m,i=e[r],u=t.M[n];return k(i)&&(o=i.apply(e.F||t,e[r+"Params"]||[t.D])),u&&!1===t.dispatchEvent(n)&&(o=!1),o},ht=function(t,n){var r,e,i,u=s(t)[0];return u.nodeType||u===o?vt(u,n):C(t.left)?{left:e=t.min||t.k||t.P||0,top:r=t.min||t.C||0,width:(t.max||t.N||t.S||0)-e,height:(t.max||t.I||0)-r}:(i={x:0,y:0},{left:t.left-i.x,top:t.top-i.y,width:t.width,height:t.height})},pt={},vt=function(n,r){r=s(r)[0];var i,u,a,c,f,l,h,p,v,d,x,g,m,M,w=n.getBBox&&n.ownerSVGElement,y=n.ownerDocument||e;if(n===o)a=tt(y),u=(i=nt(y))+(y.documentElement.clientWidth||n.innerWidth||y.body.clientWidth||0),c=a+((n.innerHeight||0)-20<y.documentElement.clientHeight?y.documentElement.clientHeight:n.innerHeight||y.body.clientHeight||0);else{if(r===o||C(r))return n.getBoundingClientRect();i=a=0,w?(x=(d=n.getBBox()).width,g=d.height):(n.viewBox&&(d=n.viewBox.baseVal)&&(i=d.x||0,a=d.y||0,x=d.width,g=d.height),x||(d="border-box"===(m=ct(n)).boxSizing,x=(parseFloat(m.width)||n.clientWidth||0)+(d?0:parseFloat(m.borderLeftWidth)+parseFloat(m.borderRightWidth)),g=(parseFloat(m.height)||n.clientHeight||0)+(d?0:parseFloat(m.borderTopWidth)+parseFloat(m.borderBottomWidth)))),u=x,c=g}return n===r?{left:i,top:a,width:u-i,height:c-a}:(l=(f=t(r,!0).multiply(t(n))).apply({x:i,y:a}),h=f.apply({x:u,y:a}),p=f.apply({x:u,y:c}),v=f.apply({x:i,y:c}),i=Math.min(l.x,h.x,p.x,v.x),a=Math.min(l.y,h.y,p.y,v.y),{left:i+((M=r.parentNode||{}).scrollLeft||0),top:a+(M.scrollTop||0),width:Math.max(l.x,h.x,p.x,v.x)-i,height:Math.max(l.y,h.y,p.y,v.y)-a})},dt=function(t,n,r,o,e,i){var u,a,c,f={};if(n)if(1!==e&&n instanceof Array){if(f.end=u=[],c=n.length,P(n[0]))for(a=0;a<c;a++)u[a]=L(n[a],e);else for(a=0;a<c;a++)u[a]=n[a]*e;r+=1.1,o-=1.1}else k(n)?f.end=function(r){var o,i,u=n.call(t,r);if(1!==e)if(P(u)){for(i in o={},u)o[i]=u[i]*e;u=o}else u*=e;return u}:f.end=n;return(r||0===r)&&(f.max=r),(o||0===o)&&(f.min=o),i&&(f.A=0),f},xt=function t(n){var r;return!(!n||!n.getAttribute||n===u)&&(!("true"!==(r=n.getAttribute("data-clickable"))&&("false"===r||!n.onclick&&!$.test(n.nodeName+"")&&"true"!==n.getAttribute("contentEditable")))||t(n.parentNode))},gt=function(t,n){for(var o,e=t.length;e--;)(o=t[e]).ondragstart=o.onselectstart=n?null:N,r.set(o,{R:!0,userSelect:n?"text":"none"})},mt=function t(n){return"fixed"===ct(n).position||((n=n.parentNode)&&1===n.nodeType?t(n):void 0)},Mt=function(t,n){t=r.T.toArray(t)[0],n=n||{};var o,e,i,u,a,c,f=document.createElement("div"),l=f.style,s=t.firstChild,h=0,p=0,v=t.scrollTop,d=t.scrollLeft,x=t.scrollWidth,g=t.scrollHeight,m=0,M=0,w=0;y&&!1!==n.U?(a="translate3d(",c="px,0px)"):S&&(a="translate(",c="px)"),this.scrollTop=function(t,n){if(!arguments.length)return-this.top();this.top(-t,n)},this.scrollLeft=function(t,n){if(!arguments.length)return-this.left();this.left(-t,n)},this.left=function(o,e){if(!arguments.length)return-(t.scrollLeft+p);var i=t.scrollLeft-d,u=p;if((i>2||i<-2)&&!e)return d=t.scrollLeft,r.j(this,{left:1,scrollLeft:1}),this.left(-d),void(n.O&&n.O());(o=-o)<0?(p=o-.5|0,o=0):o>M?(p=o-M|0,o=M):p=0,(p||u)&&(this.X||(l[S]=a+-p+"px,"+-h+c),p+m>=0&&(l.paddingRight=p+m+"px")),t.scrollLeft=0|o,d=t.scrollLeft},this.top=function(o,e){if(!arguments.length)return-(t.scrollTop+h);var i=t.scrollTop-v,u=h;if((i>2||i<-2)&&!e)return v=t.scrollTop,r.j(this,{top:1,scrollTop:1}),this.top(-v),void(n.O&&n.O());(o=-o)<0?(h=o-.5|0,o=0):o>w?(h=o-w|0,o=w):h=0,(h||u)&&(this.X||(l[S]=a+-p+"px,"+-h+c)),t.scrollTop=0|o,v=t.scrollTop},this.Y=function(){return w},this.$=function(){return M},this.disable=function(){for(s=f.firstChild;s;)u=s.nextSibling,t.appendChild(s),s=u;t===f.parentNode&&t.removeChild(f)},this.enable=function(){if((s=t.firstChild)!==f){for(;s;)u=s.nextSibling,f.appendChild(s),s=u;t.appendChild(f),this._()}},this._=function(n){var r,u,a,c=t.clientWidth===o;v=t.scrollTop,d=t.scrollLeft,c&&t.clientHeight===e&&f.offsetHeight===i&&x===t.scrollWidth&&g===t.scrollHeight&&!n||((h||p)&&(u=this.left(),a=this.top(),this.left(-t.scrollLeft),this.top(-t.scrollTop)),r=ct(t),c&&!n||(l.display="block",l.width="auto",l.paddingRight="0px",(m=Math.max(0,t.scrollWidth-t.clientWidth))&&(m+=parseFloat(r.paddingLeft)+(b?parseFloat(r.paddingRight):0))),l.display="inline-block",l.position="relative",l.overflow="visible",l.verticalAlign="top",l.boxSizing="content-box",l.width="100%",l.paddingRight=m+"px",b&&(l.paddingBottom=r.paddingBottom),o=t.clientWidth,e=t.clientHeight,x=t.scrollWidth,g=t.scrollHeight,M=t.scrollWidth-o,w=t.scrollHeight-e,i=f.offsetHeight,l.display="block",(u||a)&&(this.left(u),this.top(a)))},this.content=f,this.element=t,this.X=!1,this.enable()},wt=function(t){if(F()&&document.body){var n=window&&window.navigator;o=window,e=document,i=e.documentElement,u=e.body,a=R("div"),w=!!window.PointerEvent,(c=R("div")).style.cssText="visibility:hidden;height:1px;top:-1px;pointer-events:none;position:relative;clear:both;cursor:grab",M="grab"===c.style.cursor?"grab":"move",g=n&&-1!==n.userAgent.toLowerCase().indexOf("android"),p="ontouchstart"in i&&"orientation"in o||n&&(n.H>0||n.msMaxTouchPoints>0),x=R("div"),k=R("div"),P=k.style,C=u,P.display="inline-block",P.position="relative",x.style.cssText=k.innerHTML="width:90px;height:40px;padding:10px;overflow:auto;visibility:hidden",x.appendChild(k),C.appendChild(x),d=k.offsetHeight+18>x.scrollHeight,C.removeChild(x),b=d,v=function(t){for(var n=t.split(","),r=(("onpointerdown"in a?"pointerdown,pointermove,pointerup,pointercancel":"onmspointerdown"in a?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":t).split(",")),o={},e=4;--e>-1;)o[n[e]]=r[e],o[r[e]]=n[e];try{i.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){h=1}}))}catch(t){}return o}("touchstart,touchmove,touchend,touchcancel"),B(e,"touchcancel",N),B(o,"touchmove",N),u&&u.addEventListener("touchstart",N),B(e,"contextmenu",(function(){for(var t in Y)Y[t].K&&Y[t].L()})),r=f=D()}var d,x,k,P,C;r?(m=r.plugins.W,l=r.T.Z,S=l(S),I=l(I),s=r.T.toArray,y=!!l("perspective")):t&&console.warn("Please gsap.registerPlugin(Draggable)")},yt=function(){function t(t){this.M={},this.target=t||this}var n=t.prototype;return n.addEventListener=function(t,n){var r=this.M[t]||(this.M[t]=[]);~r.indexOf(n)||r.push(n)},n.removeEventListener=function(t,n){var r=this.M[t],o=r&&r.indexOf(n)||-1;o>-1&&r.splice(o,1)},n.dispatchEvent=function(t){var n,r=this;return(this.M[t]||[]).forEach((function(o){return!1===o.call(r,{type:t,target:r.target})&&(n=!1)})),n},t}();export var Draggable=function(u){var a,l;function h(a,f){var l;l=u.call(this)||this,r||wt(1),a=s(a)[0],m||(m=r.plugins.W),l.m=f=L(f||{}),l.target=a,l.x=l.y=l.rotation=0,l.q=parseFloat(f.q)||0,l.B=isNaN(f.B)?1:parseFloat(f.B)||0,l.G=f.G,l.J=f.J||0,l.V=null,l.tt=!!f.tt,r.nt(a,"x");var y,b,F,D,N,S,R,$,Z,Q,it,ft,vt,yt,bt,Ft,Dt,kt,Pt,Ct,Nt,St,It,Et,At,Rt,Tt,Ut,jt,Ot,Xt,Yt=(f.type||"x,y").toLowerCase(),zt=~Yt.indexOf("x")||~Yt.indexOf("y"),$t=-1!==Yt.indexOf("rotation"),_t=$t?"rotation":zt?"x":"left",Ht=zt?"y":"top",Kt=!(!~Yt.indexOf("x")&&!~Yt.indexOf("left")&&"scroll"!==Yt),Lt=!(!~Yt.indexOf("y")&&!~Yt.indexOf("top")&&"scroll"!==Yt),Wt=f.rt||2,Zt=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(l),qt=s(f.ot||f.et||a),Bt={},Gt=0,Jt=!1,Qt=f.it||40,Vt=f.ut||40,tn=f.ct||40,nn=f.ft||40,rn=f.lt||xt,on=0,en=a.st||r.vt.ht(a),un=mt(a),an=function(t,n){return parseFloat(en.get(a,t,n))},cn=a.ownerDocument||e,fn=function(t){return J(t),t.stopImmediatePropagation&&t.stopImmediatePropagation(),!1},ln=function t(n){if(Zt.J&&Zt.dt&&(Jt||Dt)){var r,e,u,c,f,l,s,h,p=a,v=15*Zt.J;for(Jt=!1,K.scrollTop=null!=o.pageYOffset?o.pageYOffset:null!=cn.documentElement.scrollTop?cn.documentElement.scrollTop:cn.body.scrollTop,K.scrollLeft=null!=o.pageXOffset?o.pageXOffset:null!=cn.documentElement.scrollLeft?cn.documentElement.scrollLeft:cn.body.scrollLeft,c=Zt.xt-K.scrollLeft,f=Zt.gt-K.scrollTop;p&&!e;)r=(e=et(p.parentNode))?K:p.parentNode,u=e?{bottom:Math.max(i.clientHeight,o.innerHeight||0),right:Math.max(i.clientWidth,o.innerWidth||0),left:0,top:0}:r.getBoundingClientRect(),l=s=0,Lt&&((h=r.p-r.scrollTop)<0?s=h:f>u.bottom-tn&&h?(Jt=!0,s=Math.min(h,v*(1-Math.max(0,u.bottom-f)/tn)|0)):f<u.top+Qt&&r.scrollTop&&(Jt=!0,s=-Math.min(r.scrollTop,v*(1-Math.max(0,f-u.top)/Qt)|0)),s&&(r.scrollTop+=s)),Kt&&((h=r.h-r.scrollLeft)<0?l=h:c>u.right-Vt&&h?(Jt=!0,l=Math.min(h,v*(1-Math.max(0,u.right-c)/Vt)|0)):c<u.left+nn&&r.scrollLeft&&(Jt=!0,l=-Math.min(r.scrollLeft,v*(1-Math.max(0,c-u.left)/nn)|0)),l&&(r.scrollLeft+=l)),e&&(l||s)&&(o.scrollTo(r.scrollLeft,r.scrollTop),Fn(Zt.xt+l,Zt.gt+s)),p=r}if(Dt){var d=Zt.x,x=Zt.y;$t?(Zt.deltaX=d-parseFloat(en.rotation),Zt.rotation=d,en.rotation=d+"deg",en.Mt(1,en)):b?(Lt&&(Zt.deltaY=x-b.top(),b.top(x)),Kt&&(Zt.deltaX=d-b.left(),b.left(d))):zt?(Lt&&(Zt.deltaY=x-parseFloat(en.y),en.y=x+"px"),Kt&&(Zt.deltaX=d-parseFloat(en.x),en.x=d+"px"),en.Mt(1,en)):(Lt&&(Zt.deltaY=x-parseFloat(a.style.top||0),a.style.top=x+"px"),Kt&&(Zt.deltaY=d-parseFloat(a.style.left||0),a.style.left=d+"px")),!$||n||Ut||(Ut=!0,!1===st(Zt,"drag","onDrag")&&(Kt&&(Zt.x-=Zt.deltaX),Lt&&(Zt.y-=Zt.deltaY),t(!0)),Ut=!1)}Dt=!1},sn=function(t,n){var o,e,i=Zt.x,u=Zt.y;a.st||(en=r.vt.ht(a)),zt?(Zt.x=parseFloat(en.x),Zt.y=parseFloat(en.y)):$t?Zt.x=Zt.rotation=parseFloat(en.rotation):b?(Zt.y=b.top(),Zt.x=b.left()):(Zt.y=parseInt(a.style.top||(e=ct(a))&&e.top,10)||0,Zt.x=parseInt(a.style.left||(e||{}).left,10)||0),(Pt||Ct||Nt)&&!n&&(Zt.dt||Zt.wt)&&(Nt&&(H.x=Zt.x,H.y=Zt.y,(o=Nt(H)).x!==Zt.x&&(Zt.x=o.x,Dt=!0),o.y!==Zt.y&&(Zt.y=o.y,Dt=!0)),Pt&&(o=Pt(Zt.x))!==Zt.x&&(Zt.x=o,$t&&(Zt.rotation=o),Dt=!0),Ct&&((o=Ct(Zt.y))!==Zt.y&&(Zt.y=o),Dt=!0)),Dt&&ln(!0),t||(Zt.deltaX=Zt.x-i,Zt.deltaY=Zt.y-u,st(Zt,"throwupdate","onThrowUpdate"))},hn=function(t,n,r,o){return null==n&&(n=-U),null==r&&(r=U),k(t)?function(e){var i=Zt.K?1-Zt.B:1;return t.call(Zt,e>r?r+(e-r)*i:e<n?n+(e-n)*i:e)*o}:A(t)?function(o){for(var e,i,u=t.length,a=0,c=U;--u>-1;)(i=(e=t[u])-o)<0&&(i=-i),i<c&&e>=n&&e<=r&&(a=u,c=i);return t[a]}:isNaN(t)?function(t){return t}:function(){return t*o}},pn=function(){var t,n,r,o;R=!1,b?(b._(),Zt.k=it=-b.$(),Zt.C=vt=-b.Y(),Zt.N=Q=Zt.I=ft=0,R=!0):f.bounds&&(t=ht(f.bounds,a.parentNode),$t?(Zt.k=it=t.left,Zt.N=Q=t.left+t.width,Zt.C=vt=Zt.I=ft=0):C(f.bounds.N)&&C(f.bounds.I)?(n=ht(a,a.parentNode),Zt.k=it=Math.round(an(_t,"px")+t.left-n.left-.5),Zt.C=vt=Math.round(an(Ht,"px")+t.top-n.top-.5),Zt.N=Q=Math.round(it+(t.width-n.width)),Zt.I=ft=Math.round(vt+(t.height-n.height))):(t=f.bounds,Zt.k=it=t.k,Zt.C=vt=t.C,Zt.N=Q=t.N,Zt.I=ft=t.I),it>Q&&(Zt.k=Q,Zt.N=Q=it,it=Zt.k),vt>ft&&(Zt.C=ft,Zt.I=ft=vt,vt=Zt.C),$t&&(Zt.P=it,Zt.S=Q),R=!0),f.yt&&(r=!0===f.yt?f.bt||{}:f.yt,o=A(r)||k(r),$t?(Pt=hn(o?r:r.rotation,it,Q,1),Ct=null):r.points?Nt=function(t,n,r,o,e,i,u){return i=i&&i<U?i*i:U,k(t)?function(a){var c,f,l,s=Zt.K?1-Zt.B:1,h=a.x,p=a.y;return a.x=h=h>r?r+(h-r)*s:h<n?n+(h-n)*s:h,a.y=p=p>e?e+(p-e)*s:p<o?o+(p-o)*s:p,(c=t.call(Zt,a))!==a&&(a.x=c.x,a.y=c.y),1!==u&&(a.x*=u,a.y*=u),i<U&&(f=a.x-h)*f+(l=a.y-p)*l>i&&(a.x=h,a.y=p),a}:A(t)?function(n){for(var r,o,e,u,a=t.length,c=0,f=U;--a>-1;)(u=(r=(e=t[a]).x-n.x)*r+(o=e.y-n.y)*o)<f&&(c=a,f=u);return f<=i?t[c]:n}:function(t){return t}}(o?r:r.points,it,Q,vt,ft,r.Ft,b?-1:1):(Kt&&(Pt=hn(o?r:r.x||r.left||r.scrollLeft,it,Q,b?-1:1)),Lt&&(Ct=hn(o?r:r.y||r.top||r.scrollTop,vt,ft,b?-1:1))))},vn=function(){Zt.wt=!1,st(Zt,"throwcomplete","onThrowComplete")},dn=function(){Zt.wt=!1},xn=function(t,n){var o,e,i,u;t&&m?(!0===t&&(o=f.bt||f.yt||{},e=A(o)||k(o),t={Dt:(f.kt||f.Dt||1e3)/($t?10:1)},$t?t.rotation=dt(Zt,e?o:o.rotation,Q,it,1,n):(Kt&&(t[_t]=dt(Zt,e?o:o.points||o.x||o.left,Q,it,b?-1:1,n||"x"===Zt.V)),Lt&&(t[Ht]=dt(Zt,e?o:o.points||o.y||o.top,ft,vt,b?-1:1,n||"y"===Zt.V)),(o.points||A(o)&&P(o[0]))&&(t.Pt=_t+","+Ht,t.Ft=o.Ft))),Zt.wt=!0,u=isNaN(f.Ct)?1===f.B?0:1-Zt.B+.2:f.Ct,t.duration||(t.duration={max:Math.max(f.Nt||0,"St"in f?f.St:2),min:isNaN(f.Nt)?0===u||P(t)&&t.Dt>1e3?0:.5:f.Nt,It:u}),Zt.Et=i=r.to(b||a,{W:t,data:"_draggable",u:vn,At:dn,Rt:f.Tt?st:sn,Ut:f.Tt?[Zt,"onthrowupdate","onThrowUpdate"]:o&&o.Ft?[!1,!0]:[]}),f.Tt||(b&&(b.X=!0),i.jt(1e9,!0,!0),sn(!0,!0),Zt.Ot=Zt.x,Zt.Xt=Zt.y,$t&&(Zt.Yt=Zt.x),i.play(0),sn(!0,!0),b&&(b.X=!1))):R&&Zt.zt()},gn=function(r){var o,e=Et;Et=t(a.parentNode,!0),r&&Zt.K&&!Et.equals(e||new n)&&(o=e.inverse().apply({x:F,y:D}),Et.apply(o,o),F=o.x,D=o.y),Et.equals(j)&&(Et=null)},mn=function(){var n,r,o,e=1-Zt.B,i=un?nt(cn):0,u=un?tt(cn):0;gn(!1),Et&&(pt.x=Zt.xt-i,pt.y=Zt.gt-u,Et.apply(pt,pt),F=pt.x,D=pt.y),Dt&&(Fn(Zt.xt,Zt.gt),ln(!0)),b?(pn(),S=b.top(),N=b.left()):(Mn()?(sn(!0,!0),pn()):Zt.zt(),$t?(n=a.ownerSVGElement?[en.$t-a.getBBox().x,en._t-a.getBBox().y]:(ct(a)[I]||"0 0").split(" "),Ft=Zt.Ht=t(a).apply({x:parseFloat(n[0])||0,y:parseFloat(n[1])||0}),sn(!0,!0),r=Zt.xt-Ft.x-i,o=Ft.y-Zt.gt+u,N=Zt.x,S=Zt.y=Math.atan2(o,r)*T):(S=an(Ht,"px"),N=an(_t,"px"))),R&&e&&(N>Q?N=Q+(N-Q)/e:N<it&&(N=it-(it-N)/e),$t||(S>ft?S=ft+(S-ft)/e:S<vt&&(S=vt-(vt-S)/e))),Zt.Kt=N,Zt.Lt=S},Mn=function(){return Zt.Et&&Zt.Et.isActive()},wn=function(){!c.parentNode||Mn()||Zt.dt||c.parentNode.removeChild(c)},yn=function(t,n){var e;if(!y||Zt.K||!t||!("mousedown"!==t.type&&"pointerdown"!==t.type||n)&&O()-on<30&&v[Zt.D.type])Xt&&t&&y&&J(t);else{if(At=Mn(),Zt.D=t,v[t.type]?(It=~t.type.indexOf("touch")?t.currentTarget||t.target:cn,B(It,"touchend",Dn),B(It,"touchmove",bn),B(It,"touchcancel",Dn),B(cn,"touchstart",V)):(It=null,B(cn,"mousemove",bn)),Tt=null,w&&It||(B(cn,"mouseup",Dn),t&&t.target&&B(t.target,"mouseup",Dn)),St=rn.call(Zt,t.target)&&!1===f.Wt&&!n)return B(t.target,"change",Dn),st(Zt,"pressInit","onPressInit"),st(Zt,"press","onPress"),void gt(qt,!0);var i;if(Rt=!(!It||Kt===Lt||!1===Zt.m.Zt||Zt.m.qt&&t&&(t.ctrlKey||t.which>2))&&(Kt?"y":"x"),(Xt=!Rt&&!Zt.tt)&&(J(t),B(o,"touchforcechange",J)),t.changedTouches?(t=yt=t.changedTouches[0],bt=t.identifier):t.pointerId?bt=t.pointerId:yt=bt=null,d++,i=ln,X.push(i),1===X.length&&r.o.add(W),D=Zt.gt=t.pageY,F=Zt.xt=t.pageX,st(Zt,"pressInit","onPressInit"),(Rt||Zt.J)&&ut(a.parentNode),!a.parentNode||!Zt.J||b||$t||!a.parentNode.h||c.parentNode||a.getBBox||(c.style.width=a.parentNode.scrollWidth+"px",a.parentNode.appendChild(c)),mn(),Zt.Et&&Zt.Et.Bt(),Zt.wt=!1,r.j(b||a,Bt,!0),b&&r.j(a,{scrollTo:1},!0),Zt.Et=Zt.V=null,(f.Gt||!$t&&!b&&!1!==f.Gt)&&(a.style.zIndex=h.zIndex++),Zt.K=!0,$=!(!f.Jt&&!Zt.M.Qt),Z=!(!f.Vt&&!Zt.M.move),!$t&&(!1!==f.cursor||f.tn))for(e=qt.length;--e>-1;)r.set(qt[e],{cursor:f.tn||f.cursor||("grab"===M?"grabbing":M)});st(Zt,"press","onPress")}},bn=function(t){var n,r,e,i,u,a,c=t;if(y&&!x&&Zt.K&&t){if(Zt.D=t,n=t.changedTouches){if((t=n[0])!==yt&&t.identifier!==bt){for(i=n.length;--i>-1&&(t=n[i]).identifier!==bt;);if(i<0)return}}else if(t.pointerId&&bt&&t.pointerId!==bt)return;It&&Rt&&!Tt&&(pt.x=t.pageX,pt.y=t.pageY,Et&&Et.apply(pt,pt),r=pt.x,e=pt.y,((u=Math.abs(r-F))!==(a=Math.abs(e-D))&&(u>Wt||a>Wt)||g&&Rt===Tt)&&(Tt=u>a&&Kt?"x":"y",Rt&&Tt!==Rt&&B(o,"touchforcechange",J),!1!==Zt.m.nn&&Kt&&Lt&&(Zt.V="x"===Tt?"y":"x",k(Zt.m.rn)&&Zt.m.rn.call(Zt,c)),g&&Rt===Tt))?Dn(c):(Zt.tt||Rt&&(!Tt||Rt===Tt)||!1===c.cancelable?Xt&&(Xt=!1):(J(c),Xt=!0),Zt.J&&(Jt=!0),Fn(t.pageX,t.pageY,Z))}else Xt&&t&&y&&J(t)},Fn=function(t,n,r){var o,e,i,u,a,c,f=1-Zt.q,l=1-Zt.B,s=Zt.xt,h=Zt.gt,p=S,v=Zt.x,d=Zt.y,x=Zt.Ot,g=Zt.Xt,m=Zt.Yt,M=Dt;Zt.xt=t,Zt.gt=n,un&&(t-=nt(cn),n-=tt(cn)),$t?(u=Math.atan2(Ft.y-n,t-Ft.x)*T,(a=Zt.y-u)>180?(S-=360,Zt.y=u):a<-180&&(S+=360,Zt.y=u),Zt.x!==N||Math.abs(S-u)>Wt?(Zt.y=u,i=N+(S-u)*f):i=N):(Et&&(c=t*Et.a+n*Et.c+Et.e,n=t*Et.b+n*Et.d+Et.f,t=c),(e=n-D)<Wt&&e>-Wt&&(e=0),(o=t-F)<Wt&&o>-Wt&&(o=0),(Zt.G||Zt.V)&&(o||e)&&((c=Zt.V)||(Zt.V=c=Kt&&Math.abs(o)>Math.abs(e)?"y":Lt?"x":null,c&&k(Zt.m.rn)&&Zt.m.rn.call(Zt,Zt.D)),"y"===c?e=0:"x"===c&&(o=0)),i=E(N+o*f),u=E(S+e*f)),(Pt||Ct||Nt)&&(Zt.x!==i||Zt.y!==u&&!$t)?(Nt&&(H.x=i,H.y=u,c=Nt(H),i=E(c.x),u=E(c.y)),Pt&&(i=E(Pt(i))),Ct&&(u=E(Ct(u)))):R&&(i>Q?i=Q+Math.round((i-Q)*l):i<it&&(i=it+Math.round((i-it)*l)),$t||(u>ft?u=Math.round(ft+(u-ft)*l):u<vt&&(u=Math.round(vt+(u-vt)*l)))),(Zt.x!==i||Zt.y!==u&&!$t)&&($t?(Zt.Yt=Zt.x=Zt.Ot=i,Dt=!0):(Lt&&(Zt.y=Zt.Xt=u,Dt=!0),Kt&&(Zt.x=Zt.Ot=i,Dt=!0)),r&&!1===st(Zt,"move","onMove")?(Zt.xt=s,Zt.gt=h,S=p,Zt.x=v,Zt.y=d,Zt.Ot=x,Zt.Xt=g,Zt.Yt=m,Dt=M):!Zt.dt&&Zt.K&&(Zt.dt=!0,st(Zt,"dragstart","onDragStart")))},Dn=function t(n,e){if(y&&Zt.K&&(!n||null==bt||e||!(n.pointerId&&n.pointerId!==bt||n.changedTouches&&!function(t,n){for(var r=t.length;r--;)if(t[r].identifier===n)return!0}(n.changedTouches,bt)))){Zt.K=!1;var i,u,c,l,s,h=n,p=Zt.dt,v=Zt.m.qt&&n&&(n.ctrlKey||n.which>2),x=r.on(.001,wn);if(It?(G(It,"touchend",t),G(It,"touchmove",bn),G(It,"touchcancel",t),G(cn,"touchstart",V)):G(cn,"mousemove",bn),G(o,"touchforcechange",J),w&&It||(G(cn,"mouseup",t),n&&n.target&&G(n.target,"mouseup",t)),Dt=!1,St&&!v)return n&&(G(n.target,"change",t),Zt.D=h),gt(qt,!1),st(Zt,"release","onRelease"),st(Zt,"click","onClick"),void(St=!1);if(q(ln),!$t)for(u=qt.length;--u>-1;)at(qt[u],"cursor",f.cursor||(!1!==f.cursor?M:null));if(p&&(Gt=_=O(),Zt.dt=!1),d--,n){if((i=n.changedTouches)&&(n=i[0])!==yt&&n.identifier!==bt){for(u=i.length;--u>-1&&(n=i[u]).identifier!==bt;);if(u<0)return}Zt.D=h,Zt.xt=n.pageX,Zt.gt=n.pageY}return v&&h?(J(h),Xt=!0,st(Zt,"release","onRelease")):h&&!p?(Xt=!1,At&&(f.bt||f.bounds)&&xn(f.W||f.en),st(Zt,"release","onRelease"),g&&"touchmove"===h.type||-1!==h.type.indexOf("cancel")||(st(Zt,"click","onClick"),O()-on<300&&st(Zt,"doubleclick","onDoubleClick"),l=h.target||a,on=O(),s=function(){on===jt||!Zt.enabled()||Zt.K||h.defaultPrevented||(l.click?l.click():cn.createEvent&&((c=cn.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,o,1,Zt.D.screenX,Zt.D.screenY,Zt.xt,Zt.gt,!1,!1,!1,!1,0,null),l.dispatchEvent(c)))},g||h.defaultPrevented||r.on(.05,s))):(xn(f.W||f.en),Zt.tt||!h||!1===f.Wt&&rn.call(Zt,h.target)||!p||Rt&&(!Tt||Rt!==Tt)||!1===h.cancelable?Xt=!1:(Xt=!0,J(h)),st(Zt,"release","onRelease")),Mn()&&x.duration(Zt.Et.duration()),p&&st(Zt,"dragend","onDragEnd"),!0}Xt&&n&&y&&J(n)},kn=function(t){if(t&&Zt.dt&&!b){var n=t.target||a.parentNode,r=n.scrollLeft-n.v,o=n.scrollTop-n.g;(r||o)&&(Et?(F-=r*Et.a+o*Et.c,D-=o*Et.d+r*Et.b):(F-=r,D-=o),n.v+=r,n.g+=o,Fn(Zt.xt,Zt.gt))}},Pn=function(t){var n=O(),r=n-on<40,o=n-Gt<40,e=r&&jt===on,i=Zt.D&&Zt.D.defaultPrevented,u=r&&Ot===on,a=t.isTrusted||null==t.isTrusted&&r&&e;if((e||o&&!1!==Zt.m.un)&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),r&&(!Zt.D||!Zt.D.defaultPrevented)&&(!e||a&&!u))return a&&e&&(Ot=on),void(jt=on);(Zt.K||o||r)&&(a&&t.detail&&r&&!i||J(t))},Cn=function(t){return Et?{x:t.x*Et.a+t.y*Et.c+Et.e,y:t.x*Et.b+t.y*Et.d+Et.f}:{x:t.x,y:t.y}};return(kt=h.get(a))&&kt.Bt(),l.an=function(t,n){var r,o,e,i;yn(t||Zt.D,!0),n&&!Zt.cn(t||Zt.D)&&(r=lt(t||Zt.D),o=lt(a),e=Cn({x:r.left+r.width/2,y:r.top+r.height/2}),i=Cn({x:o.left+o.width/2,y:o.top+o.height/2}),F-=e.x-i.x,D-=e.y-i.y),Zt.dt||(Zt.dt=!0,st(Zt,"dragstart","onDragStart"))},l.Qt=bn,l.L=function(t){return Dn(t||Zt.D,!0)},l.fn=function(){return Zt.dt?0:(O()-Gt)/1e3},l.ln=function(){return(O()-on)/1e3},l.cn=function(t,n){return h.cn(Zt.target,t,n)},l.sn=function(t,n){var r,o,e,i,u,c,f="velocity"===t&&m?t:P(t)&&!$t?"element":"start";return"element"===f&&(u=lt(Zt.target),c=lt(t)),r="start"===f?Zt.x-N:"velocity"===f?m.hn(a,_t):u.left+u.width/2-(c.left+c.width/2),$t?r<0?"counter-clockwise":"clockwise":(n=n||2,o="start"===f?Zt.y-S:"velocity"===f?m.hn(a,Ht):u.top+u.height/2-(c.top+c.height/2),i=(e=Math.abs(r/o))<1/n?"":r<0?"left":"right",e<n&&(""!==i&&(i+="-"),i+=o<0?"up":"down"),i)},l.zt=function(t,n){var r,e,i,u,c,l;if(t&&f.bounds!==t)return f.bounds=t,Zt.update(!0,n);if(sn(!0),pn(),R&&!Mn()){if(r=Zt.x,e=Zt.y,r>Q?r=Q:r<it&&(r=it),e>ft?e=ft:e<vt&&(e=vt),(Zt.x!==r||Zt.y!==e)&&(i=!0,Zt.x=Zt.Ot=r,$t?Zt.Yt=r:Zt.y=Zt.Xt=e,Dt=!0,ln(!0),Zt.J&&!Zt.dt))for(ut(a.parentNode),u=a,K.scrollTop=null!=o.pageYOffset?o.pageYOffset:null!=cn.documentElement.scrollTop?cn.documentElement.scrollTop:cn.body.scrollTop,K.scrollLeft=null!=o.pageXOffset?o.pageXOffset:null!=cn.documentElement.scrollLeft?cn.documentElement.scrollLeft:cn.body.scrollLeft;u&&!l;)c=(l=et(u.parentNode))?K:u.parentNode,Lt&&c.scrollTop>c.p&&(c.scrollTop=c.p),Kt&&c.scrollLeft>c.h&&(c.scrollLeft=c.h),u=c;Zt.wt&&(i||Zt.Ot>Q||Zt.Ot<it||Zt.Xt>ft||Zt.Xt<vt)&&xn(f.W||f.en,i)}return Zt},l.update=function(t,n,r){var o=Zt.x,e=Zt.y;return gn(!n),t?Zt.zt():(Dt&&r&&ln(!0),sn(!0)),n&&(Fn(Zt.xt,Zt.gt),Dt&&ln(!0)),Zt.K&&!n&&(Kt&&Math.abs(o-Zt.x)>.01||Lt&&Math.abs(e-Zt.y)>.01&&!$t)&&mn(),Zt.J&&(ut(a.parentNode,Zt.dt),Jt=Zt.dt,ln(!0),ot(a,kn),rt(a,kn)),Zt},l.enable=function(t){var n,o,e,i={R:!0};if($t||!1===f.cursor||(i.cursor=f.cursor||M),r.T.Z("touchCallout")&&(i.pn="none"),i.touchAction=Kt===Lt?"none":f.Zt||f.tt?"manipulation":Kt?"pan-y":"pan-x","soft"!==t){for(o=qt.length;--o>-1;)e=qt[o],w||B(e,"mousedown",yn),B(e,"touchstart",yn),B(e,"click",Pn,!0),r.set(e,i),e.getBBox&&e.ownerSVGElement&&r.set(e.ownerSVGElement,{touchAction:Kt===Lt?"none":f.Zt||f.tt?"manipulation":Kt?"pan-y":"pan-x"}),f.qt||B(e,"contextmenu",fn);gt(qt,!1)}return rt(a,kn),y=!0,m&&"soft"!==t&&m.track(b||a,zt?"x,y":$t?"rotation":"top,left"),a.vn=n="d"+z++,Y[n]=Zt,b&&(b.enable(),b.element.vn=n),(f.bounds||$t)&&mn(),f.bounds&&Zt.zt(),Zt},l.disable=function(t){var n,r,o=Zt.dt;if(!$t)for(n=qt.length;--n>-1;)at(qt[n],"cursor",null);if("soft"!==t){for(n=qt.length;--n>-1;)r=qt[n],at(r,"touchCallout",null),at(r,"touchAction",null),G(r,"mousedown",yn),G(r,"touchstart",yn),G(r,"click",Pn),G(r,"contextmenu",fn);gt(qt,!0),It&&(G(It,"touchcancel",Dn),G(It,"touchend",Dn),G(It,"touchmove",bn)),G(cn,"mouseup",Dn),G(cn,"mousemove",bn)}return ot(a,kn),y=!1,m&&"soft"!==t&&m.dn(b||a,zt?"x,y":$t?"rotation":"top,left"),b&&b.disable(),q(ln),Zt.dt=Zt.K=St=!1,o&&st(Zt,"dragend","onDragEnd"),Zt},l.enabled=function(t,n){return arguments.length?t?Zt.enable(n):Zt.disable(n):y},l.Bt=function(){return Zt.wt=!1,Zt.Et&&Zt.Et.Bt(),Zt.disable(),r.set(qt,{xn:"userSelect"}),delete Y[a.vn],Zt},~Yt.indexOf("scroll")&&(b=l.gn=new Mt(a,function(t,n){for(var r in n)r in t||(t[r]=n[r]);return t}({O:function(){Zt.K&&Dn(null)}},f)),a.style.overflowY=Lt&&!p?"auto":"hidden",a.style.overflowX=Kt&&!p?"auto":"hidden",a=b.content),$t?Bt.rotation=1:(Kt&&(Bt[_t]=1),Lt&&(Bt[Ht]=1)),en.U=!("U"in f)||f.U,l.enable(),l}return l=u,(a=h).prototype=Object.create(l.prototype),a.prototype.constructor=a,a.__proto__=l,h.register=function(t){r=t,wt()},h.create=function(t,n){return f||wt(!0),s(t).map((function(t){return new h(t,n)}))},h.get=function(t){return Y[(s(t)[0]||{}).vn]},h.fn=function(){return(O()-_)/1e3},h.cn=function(t,n,r){if(t===n)return!1;var o,e,i,u=lt(t),a=lt(n),c=u.top,f=u.left,l=u.right,s=u.bottom,h=u.width,p=u.height,v=a.left>l||a.right<f||a.top>s||a.bottom<c;return v||!r?!v:(i=-1!==(r+"").indexOf("%"),r=parseFloat(r)||0,(o={left:Math.max(f,a.left),top:Math.max(c,a.top)}).width=Math.min(l,a.right)-o.left,o.height=Math.min(s,a.bottom)-o.top,!(o.width<0||o.height<0)&&(i?(r*=.01,(e=o.width*o.height)>=h*p*r||e>=a.width*a.height*r):o.width>r&&o.height>r))},h}(yt);!function(t,n){for(var r in n)r in t||(t[r]=n[r])}(Draggable.prototype,{xt:0,gt:0,Kt:0,Lt:0,deltaX:0,deltaY:0,dt:!1,K:!1}),Draggable.zIndex=1e3,Draggable.version="3.5.1",D()&&r.t(Draggable);export{Draggable as default};