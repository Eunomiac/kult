/*!
 * SplitText: 3.5.1
 * https://greensock.com
 *
 * @license Copyright 2008-2020, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
import{emojiExp as t,getText as i}from"./utils/strings.js";var n,r,o,s=/(?:\r|\n|\t\t)/g,e=/(?:\s\s+)/g,f=function(t){return r.getComputedStyle(t)},a=Array.isArray,h=[].slice,p=function(t,i){var r;return a(t)?t:"string"==(r=typeof t)&&!i&&t?h.call(n.querySelectorAll(t),0):t&&"object"===r&&"length"in t?h.call(t,0):t?[t]:[]},u=function(t){return"absolute"===t.position||!0===t.absolute},l=function(t,i){for(var n,r=i.length;--r>-1;)if(n=i[r],t.substr(0,n.length)===n)return n.length},c=function(t,i){void 0===t&&(t="");var n=~t.indexOf("++"),r=1;return n&&(t=t.split("++").join("")),function(){return"<"+i+" style='position:relative;display:inline-block;'"+(t?" class='"+t+(n?r++:"")+"'>":">")}},d=function t(i,n,r){var o=i.nodeType;if(1===o||9===o||11===o)for(i=i.firstChild;i;i=i.nextSibling)t(i,n,r);else 3!==o&&4!==o||(i.nodeValue=i.nodeValue.split(n).join(r))},v=function(t,i){for(var n=i.length;--n>-1;)t.push(i[n])},x=function(t,i,n){for(var r;t&&t!==i;){if(r=t.t||t.nextSibling)return r.textContent.charAt(0)===n;t=t.parentNode||t.i}},g=function t(i){var n,r,o=p(i.childNodes),s=o.length;for(n=0;n<s;n++)(r=o[n]).o?t(r):(n&&3===r.previousSibling.nodeType?r.previousSibling.nodeValue+=3===r.nodeType?r.nodeValue:r.firstChild.nodeValue:3!==r.nodeType&&i.insertBefore(r.firstChild,r),i.removeChild(r))},b=function(t,i){return parseFloat(i[t])||0},T=function(t,i,r,o,s,e,a){var h,p,l,c,T,w,y,L,B,R,S,m,k=f(t),W=b("paddingLeft",k),j=-999,z=b("borderBottomWidth",k)+b("borderTopWidth",k),A=b("borderLeftWidth",k)+b("borderRightWidth",k),F=b("paddingTop",k)+b("paddingBottom",k),M=b("paddingLeft",k)+b("paddingRight",k),q=b("fontSize",k)*(i.h||.2),C=k.textAlign,D=[],E=[],G=[],H=i.p||" ",I=i.tag?i.tag:i.span?"span":"div",J=i.type||i.split||"chars,words,lines",K=s&&~J.indexOf("lines")?[]:null,N=~J.indexOf("words"),O=~J.indexOf("chars"),P=u(i),Q=i.u,U=~(Q||"").indexOf("++"),V=[];for(U&&(Q=Q.split("++").join("")),l=(p=t.getElementsByTagName("*")).length,T=[],h=0;h<l;h++)T[h]=p[h];if(K||P)for(h=0;h<l;h++)((w=(c=T[h]).parentNode===t)||P||O&&!N)&&(m=c.offsetTop,K&&w&&Math.abs(m-j)>q&&("BR"!==c.nodeName||0===h)&&(y=[],K.push(y),j=m),P&&(c.l=c.offsetLeft,c.v=m,c.g=c.offsetWidth,c.T=c.offsetHeight),K&&((c.o&&w||!O&&w||N&&w||!N&&c.parentNode.parentNode===t&&!c.parentNode.o)&&(y.push(c),c.l-=W,x(c,t,H)&&(c.L=!0)),"BR"===c.nodeName&&(c.nextSibling&&"BR"===c.nextSibling.nodeName||0===h)&&K.push([])));for(h=0;h<l;h++)w=(c=T[h]).parentNode===t,"BR"!==c.nodeName?(P&&(B=c.style,N||w||(c.l+=c.parentNode.l,c.v+=c.parentNode.v),B.left=c.l+"px",B.top=c.v+"px",B.position="absolute",B.display="block",B.width=c.g+1+"px",B.height=c.T+"px"),!N&&O?c.o?(c.t=c.nextSibling,c.parentNode.appendChild(c)):c.parentNode.o?(c.i=c.parentNode,!c.previousSibling&&c.firstChild&&(c.firstChild.B=!0),c.nextSibling&&" "===c.nextSibling.textContent&&!c.nextSibling.nextSibling&&V.push(c.nextSibling),c.t=c.nextSibling&&c.nextSibling.B?null:c.nextSibling,c.parentNode.removeChild(c),T.splice(h--,1),l--):w||(m=!c.nextSibling&&x(c.parentNode,t,H),c.parentNode.i&&c.parentNode.i.appendChild(c),m&&c.parentNode.appendChild(n.createTextNode(" ")),"span"===I&&(c.style.display="inline"),D.push(c)):c.parentNode.o&&!c.o&&""!==c.innerHTML?E.push(c):O&&!c.o&&("span"===I&&(c.style.display="inline"),D.push(c))):K||P?(c.parentNode&&c.parentNode.removeChild(c),T.splice(h--,1),l--):N||t.appendChild(c);for(h=V.length;--h>-1;)V[h].parentNode.removeChild(V[h]);if(K){for(P&&(R=n.createElement(I),t.appendChild(R),S=R.offsetWidth+"px",m=R.offsetParent===t?0:t.offsetLeft,t.removeChild(R)),B=t.style.cssText,t.style.cssText="display:none;";t.firstChild;)t.removeChild(t.firstChild);for(L=" "===H&&(!P||!N&&!O),h=0;h<K.length;h++){for(y=K[h],(R=n.createElement(I)).style.cssText="display:block;text-align:"+C+";position:"+(P?"absolute;":"relative;"),Q&&(R.className=Q+(U?h+1:"")),G.push(R),l=y.length,p=0;p<l;p++)"BR"!==y[p].nodeName&&(c=y[p],R.appendChild(c),L&&c.L&&R.appendChild(n.createTextNode(" ")),P&&(0===p&&(R.style.top=c.v+"px",R.style.left=W+m+"px"),c.style.top="0px",m&&(c.style.left=c.l-m+"px")));0===l?R.innerHTML="&nbsp;":N||O||(g(R),d(R,String.fromCharCode(160)," ")),P&&(R.style.width=S,R.style.height=c.T+"px"),t.appendChild(R)}t.style.cssText=B}P&&(a>t.clientHeight&&(t.style.height=a-F+"px",t.clientHeight<a&&(t.style.height=a+z+"px")),e>t.clientWidth&&(t.style.width=e-M+"px",t.clientWidth<e&&(t.style.width=e+A+"px"))),v(r,D),N&&v(o,E),v(s,G)},w=function r(o,a,h,c){var v,x,g=p(o.childNodes),b=g.length,T=u(a);if(3!==o.nodeType||b>1){for(a.absolute=!1,v=0;v<b;v++)(3!==(x=g[v]).nodeType||/\S+/.test(x.nodeValue))&&(T&&3!==x.nodeType&&"inline"===f(x).display&&(x.style.display="inline-block",x.style.position="relative"),x.o=!0,r(x,a,h,c));return a.absolute=T,void(o.o=!0)}!function(r,o,f,a){var h,p,c,v,x,g,b,T,w=o.tag?o.tag:o.span?"span":"div",y=~(o.type||o.split||"chars,words,lines").indexOf("chars"),L=u(o),B=o.p||" ",R=" "!==B?"":L?"&#173; ":" ",S="</"+w+">",m=1,k=o.R?"function"==typeof o.R?o.R:l:null,W=n.createElement("div"),j=r.parentNode;for(j.insertBefore(W,r),W.textContent=r.nodeValue,j.removeChild(r),b=-1!==(h=i(r=W)).indexOf("<"),!1!==o.S&&(h=h.replace(e," ").replace(s,"")),b&&(h=h.split("<").join("{{LT}}")),x=h.length,p=(" "===h.charAt(0)?R:"")+f(),c=0;c<x;c++)if(g=h.charAt(c),k&&(T=k(h.substr(c),o.R)))g=h.substr(c,T||1),p+=y&&" "!==g?a()+g+"</"+w+">":g,c+=T-1;else if(g===B&&h.charAt(c-1)!==B&&c){for(p+=m?S:"",m=0;h.charAt(c+1)===B;)p+=R,c++;c===x-1?p+=R:")"!==h.charAt(c+1)&&(p+=R+f(),m=1)}else"{"===g&&"{{LT}}"===h.substr(c,6)?(p+=y?a()+"{{LT}}</"+w+">":"{{LT}}",c+=5):g.charCodeAt(0)>=55296&&g.charCodeAt(0)<=56319||h.charCodeAt(c+1)>=65024&&h.charCodeAt(c+1)<=65039?(v=((h.substr(c,12).split(t)||[])[1]||"").length||2,p+=y&&" "!==g?a()+h.substr(c,v)+"</"+w+">":h.substr(c,v),c+=v-1):p+=y&&" "!==g?a()+g+"</"+w+">":g;r.outerHTML=p+(m?S:""),b&&d(j,"{{LT}}","<")}(o,a,h,c)};export var SplitText=function(){function t(t,i){o||(n=document,r=window,o=1),this.elements=p(t),this.m=[],this.k=[],this.lines=[],this.W=[],this.j=i||{},this.split(i)}var i=t.prototype;return i.split=function(t){this.A&&this.F(),this.j=t=t||this.j,this.W.length=this.m.length=this.k.length=this.lines.length=0;for(var i,n,r,o=this.elements.length,s=t.tag?t.tag:t.span?"span":"div",e=c(t.M,s),f=c(t.q,s);--o>-1;)r=this.elements[o],this.W[o]=r.innerHTML,i=r.clientHeight,n=r.clientWidth,w(r,t,e,f),T(r,t,this.m,this.k,this.lines,n,i);return this.m.reverse(),this.k.reverse(),this.lines.reverse(),this.A=!0,this},i.F=function(){var t=this.W;if(!t)throw"revert() call wasn't scoped properly.";return this.elements.forEach((function(i,n){return i.innerHTML=t[n]})),this.m=[],this.k=[],this.lines=[],this.A=!1,this},t.create=function(i,n){return new t(i,n)},t}();SplitText.version="3.5.1";export{SplitText as default};