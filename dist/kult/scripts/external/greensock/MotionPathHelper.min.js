/*!
 * MotionPathHelper 3.5.1
 * https://greensock.com
 *
 * @license Copyright 2008-2020, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
import t from"./utils/PathEditor.js";var n,o,r,e,i,a,s,u,c,p=/(^[#\.][a-z]|[a-y][a-z])/i,f=function(t){return"string"==typeof t},l=function(t,n){var o=r.createElementNS?r.createElementNS((n||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):r.createElement(t);return o.style?o:r.createElement(t)},h=function(t,o,e){return f(t)&&p.test(t)?r.querySelector(t):Array.isArray(t)?u(s([{x:n.t(o,"x"),y:n.t(o,"y")}].concat(t),e)):f(t)||t&&"path"===(t.tagName+"").toLowerCase()?t:0},d={matrix:{a:1,b:0,c:0,d:1,e:0,f:0}},g=function(t,p){var f="Please gsap.registerPlugin(MotionPathPlugin)";o=window,n=n||t||o.o||console.warn(f),r=document,i=r.body,e=r.documentElement,(a=n&&n.plugins.i)?((c=l("textarea")).style.display="none",i.appendChild(c),s=a.u,u=a.p):!0===p&&console.warn(f)};export var MotionPathHelper=function(){function s(s,u){void 0===u&&(u={}),a||g(u.o,1);var x,v,w,P,y,b,m,k,M,H,O,C,z,A=l("div"),F=this,N={x:0,y:0};s instanceof n.h.l?x=(k=s).g()[0]:(x=n.v.toArray(s)[0],k=function(t){for(var o=n.P(t),r=0;r<o.length;r++){if(o[r].m.i)return o[r];o[r].timeline&&o.push.apply(o,o[r].timeline.k())}}(x)),v=h(u.path,x,u),this.offset=N,b=function(t){var n=t.getBoundingClientRect(),r=e.clientTop-(o.pageYOffset||e.scrollTop||i.scrollTop||0),a=e.clientLeft-(o.pageXOffset||e.scrollLeft||i.scrollLeft||0);return{left:n.left+a,top:n.top+r,right:n.right+a,bottom:n.bottom+r}}(x),P=parseFloat(n.t(x,"x","px")),y=parseFloat(n.t(x,"y","px")),w=x.getCTM&&"svg"!==x.tagName.toLowerCase(),k&&!v&&(v=h(k.m.i.path||k.m.i,x,k.m.i)),A.setAttribute("class","copy-motion-path"),A.style.cssText="border-radius:8px; background-color:rgba(85, 85, 85, 0.7); color:#fff; cursor:pointer; padding:6px 12px; font-family:Signika Negative, Arial, sans-serif; position:fixed; left:50%; transform:translate(-50%, 0); font-size:19px; bottom:10px",A.innerText="COPY MOTION PATH",A.M=F,(n.v.toArray(u.H)[0]||i).appendChild(A),function(t,n,o){t.addEventListener("click",(function(e){if(e.target.M){var i=n(e.target);if(c.value=i,i&&c.select){console.log(i),c.style.display="block",c.select();try{r.execCommand("copy"),c.blur(),o&&o(t)}catch(t){console.warn("Copy didn't work; this browser doesn't permit that.")}c.style.display="none"}}}))}(A,(function(){return F.O()}),(function(){return n.C(A,{backgroundColor:"white"},{duration:.5,backgroundColor:"rgba(85, 85, 85, 0.6)"})})),(m=v&&v.ownerSVGElement)||(M=w&&x.ownerSVGElement&&x.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg",w?(m=x.ownerSVGElement,H=x.getBBox(),O=function(t){return(t.transform.baseVal.consolidate()||d).matrix}(x),P=O.e,y=O.f,N.x=H.x,N.y=H.y):(m=l("svg",M),i.appendChild(m),m.setAttribute("viewBox","0 0 100 100"),m.style.cssText="overflow:visible; background-color: transparent; position:absolute; width:100px; height:100px; top:"+b.top+"px; left:"+b.left+"px;"),H=f(v)&&!p.test(v)?v:function(t,n){var o,r=[0,31,8,58,24,75,40,90,69,100,100,100];for(o=0;o<r.length;o+=2)r[o]+=t,r[o+1]+=n;return"M"+t+","+n+"C"+r.join(",")}(P,y),(v=l("path",M)).setAttribute("d",H),v.setAttribute("vector-effect","non-scaling-stroke"),v.style.cssText="fill:transparent; stroke-width:"+(u.A||3)+"; stroke:"+(u.F||"#555")+"; opacity:"+(u.N||.6),m.appendChild(v),(N.x||N.y)&&n.set(v,{x:N.x,y:N.y})),"selected"in u||(u.selected=!0),"R"in u||(u.R=function(t){t.x*t.x+t.y*t.y<16&&(t.x=t.y=0)}),z=k&&"nested"===k.parent.data?k.parent.parent:k,u.S=function(){z.pause(0)},C=function(){k.T(),z.j()},u.B=u.D=C,this.I=t.create(v,u),u.Y&&n.set(x,{transformOrigin:"50% 50%",q:-50,G:-50}),k?(k.m.i.path?k.m.i.path=v:k.m.i={path:v},z.parent!==n.J&&n.J.add(z,function(t){for(var n=t.K();t;)n=t.startTime()+n/(t.L()||1),t=t.parent;return n}(z)-z.delay()),z.repeat(-1).U(1)):k=z=n.to(x,{i:{path:v,start:u.start||0,end:"end"in u?u.end:1,V:"V"in u&&u.V,align:v,W:u.W},duration:u.duration||5,X:u.X||"power1.inOut",repeat:-1,U:1,paused:!u.path}),this.animation=k}return s.prototype.O=function(){return this.I.O(!0,-this.offset.x,-this.offset.y)},s}();MotionPathHelper.register=g,MotionPathHelper.create=function(t,n){return new MotionPathHelper(t,n)},MotionPathHelper.Z=function(n,o){return t.create(n,o)},MotionPathHelper.version="3.5.1";export{MotionPathHelper as default};