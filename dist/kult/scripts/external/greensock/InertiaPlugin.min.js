/*!
 * InertiaPlugin 3.5.1
 * https://greensock.com
 *
 * @license Copyright 2008-2020, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
import{VelocityTracker as n}from"./utils/VelocityTracker.js";var t,r,i,e,o,a,u,s,f,c,l,v,d=n.t,p=function(){return t||"undefined"!=typeof window&&(t=window.gsap)&&t.i&&t},h=function(n){return"number"==typeof n},g=function(n){return"object"==typeof n},y=function(n){return"function"==typeof n},m=Array.isArray,N=function(n){return n},k=1e10,w=function(n,t,r){for(var i in t)i in n||i===r||(n[i]=t[i]);return n},P=function n(t){var r,i,e={};for(r in t)e[r]=g(i=t[r])?n(i):i;return e},F=function(n,t,r,i,e){var o,a,u,s,f=t.length,c=0,l=k;if(g(n)){for(;f--;){for(u in o=t[f],a=0,n)a+=(s=o[u]-n[u])*s;a<l&&(c=f,l=a)}if((e||k)<k&&e<Math.sqrt(l))return n}else for(;f--;)(a=(o=t[f])-n)<0&&(a=-a),a<l&&o>=i&&o<=r&&(c=f,l=a);return t[c]},M=function(n,t,r,i,e,o){if("auto"===n.end)return n;var a,u,s=n.end;if(r=isNaN(r)?k:r,i=isNaN(i)?-k:i,g(t)){if(a=t.o?t:(y(s)?s(t):F(t,s,r,i,o))||t,!t.o){for(u in a)t[u]=a[u];t.o=!0}a=a[e]}else a=y(s)?s(t):m(s)?F(t,s,r,i,o):parseFloat(s);return a>r?a=r:a<i&&(a=i),{max:a,min:a,u:n.u}},x=function(n,t,r){return isNaN(n[t])?r:+n[t]},I=function(n,t){return.05*t*n/c},T=function(n,t,r){return Math.abs((t-n)*c/r/.05)},R={l:1,v:1,p:1,h:1,g:1,duration:1},b=function(n,t,r,i){if(t.h){var e,o,a,u,s,f,c=t.h.split(","),l={};for(e=0;e<c.length;e++)(a=t[o=c[e]])&&(u=h(a.m)?a.m:(s=s||d(n))&&s.N(o)?s.get(o):0,f=Math.abs(u/x(a,"resistance",i)),l[o]=parseFloat(r(n,o))+I(u,f));return l}},j=function(){(t=p())&&(i=t.k,e=t.P.toArray,u=t.P.F,f=t.I.M,l=t.P.T,o=i("power3"),c=o(.05),s=t.I.R,t.j({l:100,O:{time:1e3,V:1e3,A:1e3,B:1e3}}),a=t.j(),t.i(n),r=1)};export var InertiaPlugin={version:"3.5.1",name:"inertia",register:function(n){t=n,j()},init:function(n,t,i,o,c){r||j();var p=d(n);if("auto"===t){if(!p)return void console.warn("No inertia tracking on "+n+". InertiaPlugin.track(target) first.");t=p.getAll()}this.target=n,this.q=i,v=t;var m,F,O,V,A,B,E,q,z,C=n.C,D=C.get,G=t.duration,H=g(G),J=t.p||H&&0===G.D,K=x(t,"resistance",a.l),L=h(G)?G:function(n,t,r,i,o,u){if(void 0===r&&(r=10),void 0===i&&(i=.2),void 0===o&&(o=1),void 0===u&&(u=0),"string"==typeof n&&(n=e(n)[0]),!n)return 0;var s,c,p,y,m,N,F,j,O,V,A=0,B=k,E=t.G||t,q=f(n).get,z=x(E,"resistance",a.l);for(s in V=b(n,E,q,z),E)R[s]||(c=E[s],g(c)||((j=j||d(n))&&j.N(s)?c=h(c)?{m:c}:{m:j.get(s)}:(y=+c||0,p=Math.abs(y/z))),g(c)&&(y=h(c.m)?c.m:(j=j||d(n))&&j.N(s)?j.get(s):0,p=l(i,r,Math.abs(y/x(c,"resistance",z))),N=(m=parseFloat(q(n,s))||0)+I(y,p),"end"in c&&(c=M(c,V&&s in V?V:N,c.max,c.min,s,E.g),u&&(v===t&&(v=E=P(t)),E[s]=w(c,E[s],"end"))),"max"in c&&N>+c.max+1e-10?(O=c.u||a.O[s]||1,(F=m>c.max&&c.min!==c.max||y*O>-15&&y*O<45?i+.1*(r-i):T(m,c.max,y))+o<B&&(B=F+o)):"min"in c&&N<+c.min-1e-10&&(O=c.u||a.O[s]||1,(F=m<c.min&&c.min!==c.max||y*O>-45&&y*O<15?i+.1*(r-i):T(m,c.min,y))+o<B&&(B=F+o)),F>A&&(A=F)),p>A&&(A=p));return A>B&&(A=B),A>r?r:A<i?i:A}(n,t,H&&G.max||10,H&&G.min||.2,H&&"D"in G?+G.D:J?0:1,!0);for(m in t=v,v=0,z=b(n,t,D,K),t)R[m]||(F=t[m],y(F)&&(F=F(o,n,c)),h(F)?A=F:g(F)&&!isNaN(F.m)?A=+F.m:p&&p.N(m)?A=p.get(m):console.warn("ERROR: No velocity was defined for "+n+" property: "+m),B=I(A,L),q=0,O=D(n,m),V=u(O),O=parseFloat(O),g(F)&&(E=O+B,"end"in F&&(F=M(F,z&&m in z?z:E,F.max,F.min,m,t.g)),"max"in F&&+F.max<E?J||F.p?B=F.max-O:q=F.max-O-B:"min"in F&&+F.min>E&&(J||F.p?B=F.min-O:q=F.min-O-B)),this.H.push(m),this.J=new s(this.J,n,m,O,0,N,0,C.set(n,m,this)),this.J.K=V||0,this.J.L=B,this.J.S=q);return i.duration(L),1},U:function(n,t){var r,i=t.J;for(n=o(t.q.W/t.q.X);i;)i.set(i.Y,i.Z,(r=i.s+i.L*n+i.S*n*n,Math.round(1e4*r)/1e4+i.K),i.d,n),i=i.$}};"track,untrack,isTracking,getVelocity,getByTarget".split(",").forEach((function(t){return InertiaPlugin[t]=n[t]})),p()&&t.i(InertiaPlugin);export{InertiaPlugin as default,n as VelocityTracker};