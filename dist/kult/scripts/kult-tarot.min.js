import{gsap as e,Flip as t,MotionPathPlugin as r,RoughEase as a}from"./external/greensock/all.js";import o from"./utilities.js";import s from"./constants.js";import n from"./debug.js";import c from"./tarot-deck.js";import i from"./tarot-card.js";e.t(t,r,a),Object.entries({o:()=>{$("#over-layer *").off("click mouseenter");const t=e.timeline();return t.to("#over-layer",{scale:2,opacity:0,i:"expo.out",duration:2.5,l(){$("#over-layer *").remove(),e.set("#over-layer",{scale:1,opacity:1})}},0),t.to(".canvas-layer:not(#over-layer)",{scale:1,duration:3,i:"expo.out"},0),t},u:()=>{const t=e.timeline();return t.p("#reading-section",{h:45},{h:0,duration:6,i:"sine"}),t.to("#blackout-layer",{opacity:0,duration:6,m:45,i:"sine"},0),t.to(".canvas-layer:not(#control-layer):not(#blackout-layer)",{scale:1,opacity:1,m:45,duration:6,i:"sine"},0),t}}).forEach((([t,r])=>e.k({name:t,effect:r})));const l={g:!1,v:[],T:!1,j:s.$.O,C:!0,get F(){return this.C?s.$.C:this.j},set F(e){this.j=e},S:{1:{U:!1,X:!1,Z:s.I[1],P:!1,H:!1,N:!1},2:{U:!1,X:!1,Z:s.I[2],P:!1,H:!1,N:!1},3:{U:!1,X:!1,Z:s.I[3],P:!1,H:!1,N:!1},4:{U:!1,X:!1,Z:s.I[4],P:!1,H:!1,N:!1},5:{U:!1,X:!1,Z:s.I[5],P:!1,H:!1,N:!1}},get A(){return[1,2,3,4,5].find((e=>this.S[e].U&&!1===this.S[e].P))},get D(){return[1,2,3,4,5].find((e=>!1===this.S[e].U))},get G(){return Object.values(this.S).map((({U:e})=>e))}},u=(e,t)=>{if(e=e in s.$?s.$[e]:e,Object.values(s.$).includes(e))switch(l.F=e,console.log(`*** SWITCHING PHASE TO: ${e}`),e){case s.$.L:return y();case s.$.M:return p(t);default:return!0}return!1},d=()=>{},y=()=>{l.C=!0;e.timeline().p("#reading-section",{h:65},{h:0,duration:6,i:"sine"}).to("#blackout-layer",{opacity:0,duration:6,m:45,i:"sine"},0).to(".canvas-layer:not(#control-layer):not(#blackout-layer)",{scale:1,opacity:1,m:45,duration:6,i:"sine"},0).then((()=>{$("#blackout-layer").remove(),l.C=!1}))},p=({g:e})=>{l.C=!0,l.g=e,console.log("Starting Orbit"),console.log(l),l.g.R()},h=()=>{$(".canvas-layer *").remove(),0===$("#blackout-layer").length&&$('<div id="blackout-layer"></div>').prependTo("body"),e.set("#blackout-layer, .canvas-layer",{W:-50,_:-50,x:s.I[1].x,y:s.I[1].y,z(e,t){switch(t.id){case"blackout-layer":return 500;case"background-layer":return s.B.q-2;case"under-layer":return s.B.q-1;case"card-layer":return s.B.q;case"over-layer":return s.B.q+s.B.J;case"control-layer":return s.B.q+2*s.B.J;default:return 0}},m:80,scale(e,t){switch(t.id){case"background-layer":case"under-layer":case"card-layer":case"over-layer":return 3;default:return 1}},K:!0});Object.keys(s.V);const t=Object.keys(s.V).map((e=>new c(e,l))),[r,a]=o.Y(t,((e,r)=>r<=Math.ceil(t.length/2)-1)),n=(e.ee("#card-layer","width")-s.U.width*r.length-s.spacing.x*(r.length-1))/2,i=(e.ee("#card-layer","width")-s.U.width*a.length-s.spacing.x*(a.length-1))/2;r.forEach(((e,t)=>{e.x=n+.5*s.U.width+t*(s.spacing.x+s.U.width),e.y=Number(s.U.height),l.v.push(e),e.te(1)})),a.forEach(((e,t)=>{e.x=i+.5*s.U.width+t*(s.spacing.x+s.U.width),e.y=2.5*s.U.height,l.v.push(e),e.te(2)}))},m=()=>{c.re(),i.re(),y()};console.clear(),h(),$(document).ready((()=>{m()}));export{h as InitializeDomElements,m as Initialize,l as SessionData,u as SetPhase,d as Update};